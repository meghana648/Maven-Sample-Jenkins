
pipeline {
    agent {
         dockerfile true
    }
   
    environment
    {
        gitURL="https://github.com/meghana648/Maven-Sample-Jenkins.git"
    }
    stages {
        stage('Checkout Source Code') {
            steps {
                git branch: 'main', url: env.gitURL // Replace with your repo URL
            }
        }
        stage('Build') {
              steps 
              {
                  script
                  {
                    
                        configFileProvider([configFile(fileId: 'maven-settings', variable: 'MAVEN_SETTINGS_XML')]) 
                        {
                            sh '''
                                mvn --version
                                echo "Maven Settings: $MAVEN_SETTINGS_XML"
                                java -version
                                ls /usr/local/share/ca-certificates/
                              
                                update-alternatives --list java
                                which java
                           '''
                            sh 'mvn -Dmaven.test.skip=true clean package -s $MAVEN_SETTINGS_XML'
                            
                        }
                    
                    
                  }
              }
        }
             
    }
  
}